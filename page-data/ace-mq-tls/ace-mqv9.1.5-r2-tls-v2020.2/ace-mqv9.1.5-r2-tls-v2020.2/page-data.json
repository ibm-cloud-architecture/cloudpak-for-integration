{"componentChunkName":"component---src-templates-docs-js","path":"/ace-mq-tls/ace-mqv9.1.5-r2-tls-v2020.2/ace-mqv9.1.5-r2-tls-v2020.2","result":{"data":{"site":{"siteMetadata":{"title":"Cloud Pak for Integration | IBM","docsLocation":"https://github.com/ibm-cloud-architecture/cloudpak-for-integration"}},"mdx":{"fields":{"id":"64737ff7-36c4-5766-b375-efc45720b091","title":"Ace Mqv 9 1 5 R 2 Tls V 2020 2","slug":"/ace-mq-tls/ace-mqv9.1.5-r2-tls-v2020.2/ace-mqv9.1.5-r2-tls-v2020.2"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"ACE v11.0.0.9 and MQ v9.1.5-r2 (TLS) Connection on CloudPak for Integration v2020.2\"), mdx(\"h1\", null, \"Setup MQ\"), mdx(\"h2\", null, \"Create MQ certificates:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Follow this guide for \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/cloudpak-for-integration/b794318f30f2618da26f4814dada7b7f/Create%20KDB.md\"\n  }), \"Creating Certificates and KDB files\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Follow this video to see how to import the certs into TLS Secrets and deploy them with MQ: \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.youtube.com/watch?v=R0RZEL4jiUI\"\n  }), \"How to configure MQ with TLS certificates as secrets and expose traffic externally with CP4I\"))), mdx(\"h2\", null, \"Deploy MQ QueueManager with TLS Secrets\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"You can follow the video above or use the sample yaml syntax for deploying MQ with TLS Secrets through the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"pki.keys\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"pki.trust\"), \"  section:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"QUICKSTART\"), \" QM \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/cloudpak-for-integration/586e9a955959145614b2199ee72c5de8/quickstart-cp4i.yaml\"\n  }), \"quickstart-cp4i\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"hasingle\"), \" QM \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/cloudpak-for-integration/cfc5be4a6548ee6283737ad6479226e6/mq-dev-ha-single.yaml\"\n  }), \"mq-dev-ha-single\"))))), mdx(\"h2\", null, \"Create SNI Channel name based Route\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.ibm.com/support/knowledgecenter/SSFKSJ_9.2.0/com.ibm.mq.ctr.doc/cc_conn_qm_openshift.htm\"\n  }), \"Knowledge Center\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.ibm.com/support/pages/ibm-websphere-mq-how-does-mq-provide-multiple-certificates-certlabl-capability\"\n  }), \"MQ Channel SNI mapping rules\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"You can follow the video above or use the sample yaml\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Route for \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"QUICKSTART\"), \" QM \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/cloudpak-for-integration/7f881dd54bfa45a28cab7af0701a001b/quickstart-ext-conn-traffic.yaml\"\n  }), \"quickstart-ext-conn-traffic\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Route for \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"hasingle\"), \" QM \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/cloudpak-for-integration/48aa8ae3df94bcd83a3c38d9d1c15703/mq-dev-ha-single-conn-traffic.yaml\"\n  }), \"mq-dev-ha-single-conn-traffic\"))))), mdx(\"h1\", null, \"External Cluster Access for MQ\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.youtube.com/watch?v=4zYoLk1drtY\"\n  }), \"ACE configuration on CP4I\")), mdx(\"p\", null, \"ACE properties\"), mdx(\"ul\", null, mdx(\"li\", null, \" Queue Name: IN.PERSIST \"), mdx(\"li\", null, \" Connection: MQ client connection properties \"), mdx(\"li\", null, \" Destination queue manager name: hasingle \"), mdx(\"li\", null, \" Queue manager host name: mq-dev-ha-single-ibm-mq-qm-cp4i.apps.ctocp44.ocp.csplab.local (newly-created-route) \"), mdx(\"li\", null, \" Listener port number: 443 \"), mdx(\"li\", null, \" Channel name: HASINGLE.CONN \"), mdx(\"li\", null, \" SSL: True \"), mdx(\"li\", null, \" SSL cipher specification: ANY_TLS12 \")), mdx(\"h1\", null, \"Internal Cluster Access for MQ\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.youtube.com/watch?v=4zYoLk1drtY\"\n  }), \"ACE configuration on CP4I\")), mdx(\"p\", null, \"If App Connect Dashboard and MQ are deployed on the same cluster then you can use service name to establish connection between them\\nHere are the ACE properties: \", mdx(\"br\", null)), mdx(\"ul\", null, mdx(\"li\", null, \" Queue Name: IN.PERSIST \"), mdx(\"li\", null, \" Connection: MQ client connection properties \"), mdx(\"li\", null, \" Destination queue manager name: hasingle \"), mdx(\"li\", null, \" Queue manager host name: ha-single-ibm-mq (queue-manager-service-name) \"), mdx(\"li\", null, \" Listener port number: 1414 \"), mdx(\"li\", null, \" Channel name: HASINGLE.CONN \"), mdx(\"li\", null, \" SSL: True \"), mdx(\"li\", null, \" SSL cipher specification: ANY_TLS12 \")), mdx(\"h3\", null, \"Important:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"You DO NOT need additional SNI mapping for service name with port 1414\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"If App Connect and MQ are on the same cluster but different namespaces then you have to provide \\\\<queue-manager-service-name\", \">\", \".\\\\<your-namespace\", \">\", \".svc\")), mdx(\"h1\", null, \"Different users in MQ\"), mdx(\"p\", null, \"johndoe vs aceuser\"), mdx(\"p\", null, \"In MQ Versions 9.1.5+ it is no longer recommend to create and authorize Operating System Users on the MQ Container. Either setup \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"LDAP\"), \" for Client Connections or use SSL Cert Subject DN Matching. \"), mdx(\"p\", null, \"For non production environments you can relax security checking for MQ Client Connections by Adding a Channel Authentication Record blocking the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"nobody\"), \" User and with the addition of environment variables.\"), mdx(\"p\", null, \"In some of the MQ videos we walkthrough the process of authorizing the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"johndoe\"), \" User.\"), mdx(\"p\", null, \"This is an extra step when deploying MQ using environment variable \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"MQS_PERMIT_UNKNOWN_ID\"), \". That variable plus the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CHLAUTH\"), \" Block User rule allows Client Connections to MQ as non Operating System user as if you were an OS user. It is a way of spoofing a User that is not real.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"  template:\\n    pod:\\n      containers:\\n        - name: qmgr\\n          env:\\n            - name: MQS_PERMIT_UNKNOWN_ID\\n              value: 'true'\\n\")), mdx(\"p\", null, \"In later videos (\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.youtube.com/watch?v=9XKJvadu_wQ\"\n  }), \"How to deploy ephemeral QM with MQSNOAUT in Cloud Pak for Integration\"), \") we changed the environment variable to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"MQSNOAUT\"), \" this var plus the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CHLAUTH\"), \" Block User rule is an easier way of disabling MQ Security checks for Client Connections and doesn't require authorizing specific real (or fake) Users, like  \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"johndoe\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"aceuser\"), \" .\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"  template:\\n    pod:\\n      containers:\\n        - name: qmgr\\n          env:\\n            - name: MQSNOAUT\\n              value: 'yes'\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#ace-v11009-and-mq-v915-r2-tls-connection-on-cloudpak-for-integration-v20202","title":"ACE v11.0.0.9 and MQ v9.1.5-r2 (TLS) Connection on CloudPak for Integration v2020.2"},{"url":"#setup-mq","title":"Setup MQ","items":[{"url":"#create-mq-certificates","title":"Create MQ certificates:"},{"url":"#deploy-mq-queuemanager-with-tls-secrets","title":"Deploy MQ QueueManager with TLS Secrets"},{"url":"#create-sni-channel-name-based-route","title":"Create SNI Channel name based Route"}]},{"url":"#external-cluster-access-for-mq","title":"External Cluster Access for MQ"},{"url":"#internal-cluster-access-for-mq","title":"Internal Cluster Access for MQ","items":[{"items":[{"url":"#important","title":"Important:"}]}]},{"url":"#different-users-in-mq","title":"Different users in MQ"}]},"parent":{"__typename":"File","relativePath":"ace-mq-tls/ace-mqv9.1.5-r2-tls-v2020.2/ace-mqv9.1.5-r2-tls-v2020.2.md"},"frontmatter":{"metaTitle":null,"metaDescription":null}},"allMdx":{"edges":[{"node":{"fields":{"slug":"/codeblock","title":"Syntax Highlighting"}}},{"node":{"fields":{"slug":"/","title":"Landing Page"}}},{"node":{"fields":{"slug":"/introduction","title":"Introduction"}}},{"node":{"fields":{"slug":"/apic/apic-cli","title":"Apic Cli"}}},{"node":{"fields":{"slug":"/apic/apic-use-case-resources","title":"Apic Use Case Resources"}}},{"node":{"fields":{"slug":"/apic/third-part-oauth-okta","title":"Third Part Oauth Okta"}}},{"node":{"fields":{"slug":"/codeblock/1-index.md","title":"Sub Page"}}},{"node":{"fields":{"slug":"/es-stretch-cluster-sol/README","title":"README"}}},{"node":{"fields":{"slug":"/mq-portworx/multiinstance","title":"Multiinstance"}}},{"node":{"fields":{"slug":"/mq-uniform-cluster/README","title":"README"}}},{"node":{"fields":{"slug":"/ace-es/ace-esv10-v2020.2/ace-esv10-v2020.2","title":"Ace Esv 10 V 2020 2"}}},{"node":{"fields":{"slug":"/ace-mq-tls/ace-mqv9.1.5-r2-tls-v2020.2/Create KDB","title":"Create KDB"}}},{"node":{"fields":{"slug":"/ace-mq-tls/ace-mqv9.1.5-r2-tls-v2020.2/ace-mqv9.1.5-r2-tls-v2020.2","title":"Ace Mqv 9 1 5 R 2 Tls V 2020 2"}}},{"node":{"fields":{"slug":"/ace-oracledb/ace-oracledb-v2020.2/ace-oracledb-v2020.2","title":"Ace Oracledb V 2020 2"}}},{"node":{"fields":{"slug":"/ace-soap-create-route-ocp/ace-soap-v2020.2/ace-soap-v2020.2","title":"Ace Soap V 2020 2"}}},{"node":{"fields":{"slug":"/apic-v10-eks/README","title":"README"}}},{"node":{"fields":{"slug":"/es-mq/esv10-mq-v2020.2/esv10-mq-v2020.2","title":"Esv 10 Mq V 2020 2"}}}]}},"pageContext":{"id":"64737ff7-36c4-5766-b375-efc45720b091"}},"staticQueryHashes":["2619113677","2619113677","3706406642","3706406642","417421954","417421954"]}